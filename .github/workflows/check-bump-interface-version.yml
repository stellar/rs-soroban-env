name: check-bump-interface-version

on:
  pull_request:
    paths: 'stellar-contract-env-common/src/env.rs'

jobs:
  check_pr:
    runs-on: 'ubuntu-20.04'
    steps:
    - name: "check stellar-contract-env-common/src/meta.rs was modified"
      uses: brettcannon/check-for-changed-files@36aaa76474fc979db4e19e44c05e8e978759ac01
      with:
        file-pattern: "stellar-contract-env-common/src/meta.rs"
    - name: "check 'interface_version:' changed in the diff"
      uses: pablo-statsig/gh-pr-content-checker@c5b547fff05b0617977daa9e622f1a9e0c7be89a
      with:
        github-token: ${{github.token}}
        diffContainsRegex: "interface_version: [0-9]+,"
    - name: "check stellar-contract-env-host/wasm-examples/*.wasm were modified"
      uses: brettcannon/check-for-changed-files@36aaa76474fc979db4e19e44c05e8e978759ac01
      with:
        file-pattern: "stellar-contract-env-host/wasm-examples/*.wasm"
